<%- layout('layout/dashboard') %>

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

<div class="row my-4">
    <div class="col-lg-8 mt-5 wow fadeInLeft" data-wow-delay="0.2s">
        <div class="card">
            <div class="card-header bg-dark text-white">
                <h3>Estadísticas <i class="fa fa-bar-chart"></i> </h3>
            </div>

            <div class="card-body">
                <div class="row">
                    <div class="col-lg-7">
                        <div id="canvas-container">
                            <canvas id="chart" style="width: 50%;"></canvas>
                        </div>
                    </div>
    
                    <div class="col-lg-4">
                        <div class="form-group">
                            <div class="col-md-12 bg-success text-white py-2 px-4 text-center">Cursos: <%= counts.courses %></div>
                        </div>
    
                        <div class="form-group">
                            <div class="col-md-12 bg-success text-white py-2 px-4 text-center">Noticas: 0</div>
                        </div>
    
                        <div class="form-group">
                            <div class="col-md-12 bg-success text-white py-2 px-4 text-center">Eventos: 0</div>
                        </div>
    
                        <div class="form-group">
                            <div class="col-md-12 bg-success text-white py-2 px-4 text-center">Usuarios: <%= counts.users %></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4 wow fadeInLeft" data-wow-delay="0.6s">
            <div class="card-header bg-dark text-white">
                <h3>Comentarios recientes <i class="fa fa-comments"></i></h3>
            </div>

            <div class="card-body">
                <div class="card">
                    
                    <div class="card-header">
                        <a href="#"><h4 class="card-title text-center text-primary">Anonymous Hackeó el departamento de policias de Chicago</h4></a>
                    </div>    

                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-2">
                                avatar
                            </div>
                            <div class="col-lg-10">
                                <blockquote>
                                    <h3>David Forero dice:</h3>
                                    
                                    <p>Me ha gustado este articulo, me gustaria saber más sobre este tema.</p>
                                    <span class="mb-3" style="color: rgba(0, 0, 0, 0.5);"><i class="fa fa-clock-o"></i> Hace 2 dias</span>
                                </blockquote>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <% for(let i=0; i < courses.length; i++){ %>
            <div class="card mt-3 wow fadeInRight" data-wow-delay="<%= (i + 1) / 2 %>s">
                <div class="card-header bg-dark text-white text-center">
                    <%= courses[i].title %>
                </div>
    
                <div class="card-body text-center inscritos">
                    <h4 class="card-title">Inscritos:</h4>
                    <p class="card-title"><%= courses[i].participants_count %></p>
                </div>
            </div>
        <% } %>    
    </div>
</div>

<script src="/js/Chart.bundle.min.js"></script>
 <script>
    $(document).ready(function() {
        let datos = {
            type: 'pie',
            data : {
				datasets :[{
					data : [
                        <%= counts.panama %>,
						<%= counts.venezuela %>,
					],
					backgroundColor: [
						"#F7464A",
						"#46BFBD",
					],
				}],
				labels : [
					"Panáma",
					"Venezuela"
				]
			},
            option:{
                responsive: true
            }
        };
        let canvas = document.getElementById('chart').getContext('2d');
        window.pie = new Chart(canvas, datos)
    })
</script>